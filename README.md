
У даному завданні ми дозволимо гравцям грати та вигравати робивши ставки на улюблені команди.

Ми маємо дати змогу нашій компанії створювати івенти, які можуть у двух станах created, acitve, finished.
Юзери можуть ставити ставку лише на “created” івенти.

При цьому юзери можуть вибрати на кого ставити у івенті.

Це може бути перемога першої, чи другою команди або ж нічия (team_1, team_2, draw).

Коли матч починається стан має бути active, ставки мають перерахувтись відповідно до умови і змінити стан на winning, loosing.

Коли рахунок матчу змінюється на користь гравця, ставки мають перерахувптись відповідно до умови і змінити стан на winning, loosing.

Коли Івент стає finished , то всі ставки мають перерахуватись та змнити статс win чи lose відповідно до умови ставки.

Завдання:

1.Підняти Кафку в докер компоуз.

2.Створити два топіки по 3 партиції в кожному: events.taxonomy, bets.state

3.Змінити схему таблиці Event

- id

- type (e.g. football, basketball etc.)

- team_1 (e.g. Manchester-United)

- team_2 (e.g. Barcelona)

- event_date

- score (e.g. 1-0)

- state (created, active, finished)

4.Змінити схему таблиці Bet

- id

- date_created

- userId

- eventId

- market (team_1, team_2, draw)

- state (none, winning, losing, win, lose)

5.Винести АПІ Івентів в окремий ФастАПІ сервер.

6.Переробити Круд операції наступним чином

6.1 Створення ставки та апдейт роути мають свторити джсон півдомлення та кинути до events.taxonomy топіку.

Памятаємо, що має бути один клієн кафки на сервер.

6.3 Знищення та Вичітку оставити як є.

7. Створити консюмера Event Writer з одним grou_id, який вичитує повідомлення з топіку events.taxonomy,

та записує івент до бази даних Постгрес, як це було зроблено до цього.

8. Створити консюмера Bet Scorer з одним grou_id, який вичитує повідомлення з топіку events.taxonomy,

по івент ід вичитує усі ставки з юази даних та змінює їх стан відповідно до зміни стану(evevt.state) чи рахунку(event.score) івенту,

створю повідомлення з апдейтом ставки та висилає його до топіку bets.state

9. Створити консюмера Bet Writer з одним grou_id, який вичитує повідомлення з топіку events.taxonomy,

10. КРУД Сервер з ДЗ 4 не має змоги зінувати market ta state ставки. Ці поля змінються лише внутршньою частини системи.

Код необхідно розділити по функціях / модулях / класах так, як вважаєте за потрібне.

Використовуйте лише стандартні бібліотеки або ж ті, що були згадані під час лекцій.
    
